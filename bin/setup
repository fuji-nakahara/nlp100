#!/usr/bin/env ruby
require 'fileutils'

PROJECT_ROOT = File.expand_path('..', __dir__)
DATA_DIR     = File.expand_path('data', PROJECT_ROOT)

def system!(*args)
  system(*args) || abort("\n== Command #{args} failed ==")
end

FileUtils.chdir DATA_DIR do
  puts '== Downloading data =='
  system! 'curl http://www.cl.ecei.tohoku.ac.jp/nlp100/data/hightemp.txt -O'
  system! 'curl http://www.cl.ecei.tohoku.ac.jp/nlp100/data/jawiki-country.json.gz -O'
  system! 'curl http://www.cl.ecei.tohoku.ac.jp/nlp100/data/neko.txt -O'

  puts "\n== Analyzing neko.txt by MeCab =="
  system! 'mecab --version'
  system! 'mecab neko.txt -o neko.txt.mecab'

  puts "\n== Analyzing neko.txt by CaboCha =="
  system! 'cabocha --version'
  system! 'cabocha -f1 neko.txt -o neko.txt.cabocha'
end
